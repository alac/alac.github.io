<html>
	<head>
		<meta http-equiv='Content-Type' content='text/html; charset=UTF-8'>
 	<title>  the unicode post |  aimless bitshift</title>
 		<link rel='stylesheet' type='text/css' href='/assets/wvs.css'>
 		<link rel='stylesheet' type='text/css' href='/assets/normalize.css' />
	</head>
	<body>
		<div class='container'>
			<div class='headerbar'>
				<a href="/" style="text-decoration:none">
					<span style="color:#366B8F">
						aimless 
						<span style="color:white">bit</span>shift 
					</span>
				</a>
				<span class='headerbarMenu'>
					notes/realizations re:code
				</span>
			</div>
			<div class='subcontainer'>
				<div class='headerbarSpacer'></div>
				<div class='header depthOneContent'>
					<div class="menuCategory">
						<div class="menuCategoryTitle">
							<a>Recent:</a>
						</div>
					
			  			<div class="menuCategoryPost">
					    	<a href="/text/2016/12/24/the_unicode_post.html">* 24 Dec 2016 | the unicode post</a>
						</div>
					
			  			<div class="menuCategoryPost">
					    	<a href="/python27/2016/12/07/python_cookbook.html">* 07 Dec 2016 | python 2.7: reminders</a>
						</div>
					
			  			<div class="menuCategoryPost">
					    	<a href="/python27/2016/11/12/python_optimization_parallelism.html">* 12 Nov 2016 | python 2.7: profiling and parallism</a>
						</div>
					
			  			<div class="menuCategoryPost">
					    	<a href="/statistics/2016/10/02/statistical_significance.html">* 02 Oct 2016 | testing for statistical significance</a>
						</div>
					
			  			<div class="menuCategoryPost">
					    	<a href="/tools/2016/08/24/xcode.html">* 24 Aug 2016 | tools: xcode</a>
						</div>
					
					</div>
				</div>
				<div class='sidebar depthOneContent'>
<!-- 					display recent posts by categories                           -->
					<div class="menuCategory">
						<div class="menuCategoryTitle">
							<a>Recent:</a>
						</div>
					
			  			<div class="menuCategoryPost">
					    	<a href="/text/2016/12/24/the_unicode_post.html">* the unicode post</a>
						</div>
					
			  			<div class="menuCategoryPost">
					    	<a href="/python27/2016/12/07/python_cookbook.html">* python 2.7: reminders</a>
						</div>
					
			  			<div class="menuCategoryPost">
					    	<a href="/python27/2016/11/12/python_optimization_parallelism.html">* python 2.7: profiling and parallism</a>
						</div>
					
			  			<div class="menuCategoryPost">
					    	<a href="/statistics/2016/10/02/statistical_significance.html">* testing for statistical significance</a>
						</div>
					
			  			<div class="menuCategoryPost">
					    	<a href="/tools/2016/08/24/xcode.html">* tools: xcode</a>
						</div>
					
					</div>
					<br>
<!-- 					display all posts by categories                           -->
	
	
					<div class="menuCategory">
						<div class="menuCategoryTitle">
							<a name="Metaphors">Metaphors</a>
						</div>

							
						  	
						  		
						  			<div class="menuCategoryPost">
							    	<a href="/metaphors/2016/06/14/simple_computers.html">* simple computers</a>
									</div>
						  								  		
						  	
    				</div>
	
					<div class="menuCategory">
						<div class="menuCategoryTitle">
							<a name="Objective-C">Objective-C</a>
						</div>

							
						  	
						  		
						  			<div class="menuCategoryPost">
							    	<a href="/objective-c/2016/04/04/objective_c_patterns.html">* interaction patterns</a>
									</div>
						  								  		
						  	
						  		
						  			<div class="menuCategoryPost">
							    	<a href="/objective-c/2016/06/28/simple_arc.html">* simple automatic reference counting</a>
									</div>
						  								  		
						  	
    				</div>
	
					<div class="menuCategory">
						<div class="menuCategoryTitle">
							<a name="Python27">Python27</a>
						</div>

							
						  	
						  		
						  			<div class="menuCategoryPost">
							    	<a href="/python27/2016/11/12/python_optimization_parallelism.html">* profiling and parallism</a>
									</div>
						  								  		
						  	
						  		
						  			<div class="menuCategoryPost">
							    	<a href="/python27/2016/12/07/python_cookbook.html">* reminders</a>
									</div>
						  								  		
						  	
    				</div>
	
					<div class="menuCategory">
						<div class="menuCategoryTitle">
							<a name="Statistics">Statistics</a>
						</div>

							
						  	
						  		
						  			<div class="menuCategoryPost">
							    	<a href="/statistics/2016/10/02/statistical_significance.html">* significance and the t-test</a>
									</div>
						  								  		
						  	
    				</div>
	
					<div class="menuCategory">
						<div class="menuCategoryTitle">
							<a name="Text">Text</a>
						</div>

							
						  	
						  		
						  			<div class="menuCategoryPost">
							    	<a href="/text/2016/12/24/the_unicode_post.html">* the unicode post</a>
									</div>
						  								  		
						  	
    				</div>
	
					<div class="menuCategory">
						<div class="menuCategoryTitle">
							<a name="Tools">Tools</a>
						</div>

							
						  	
						  		
						  			<div class="menuCategoryPost">
							    	<a href="/tools/2015/05/23/source-control-gitting-started.html">* git / source control</a>
									</div>
						  								  		
						  	
						  		
						  			<div class="menuCategoryPost">
							    	<a href="/tools/2016/04/25/regular_expressions.html">* regexes</a>
									</div>
						  								  		
						  	
						  		
						  			<div class="menuCategoryPost">
							    	<a href="/tools/2016/08/24/xcode.html">* xcode</a>
									</div>
						  								  		
						  	
    				</div>
	
					<div class="menuCategory">
						<div class="menuCategoryTitle">
							<a name="Unix">Unix</a>
						</div>

							
						  	
						  		
						  			<div class="menuCategoryPost">
							    	<a href="/unix/2016/04/12/p1_unix_in_short.html">* part 1: getting around</a>
									</div>
						  								  		
						  	
    				</div>
	
				</div>
				<div class='content'>
				  <div class='post depthOneContent'>
	<div class='postHeader'>
	<h1>
		the unicode post
	</h1>
	</div>
	<div class='postBody'>
	24 Dec 2016 | Text
	<p>Before memes roamed the earth, text was an important form of communication. And yet, it was hopelessly complex.</p>

<p>The guide to hating plaintext:</p>

<ul>
  <li>Why is Ascii awful?</li>
  <li>Why are there so many encodings?</li>
  <li>What’s the right encoding?</li>
  <li>What are graphemes, glyphs, characters?</li>
  <li>How do we get by in such a cold an heartless universe?</li>
</ul>

<!--more-->

<h1 id="why-is-ascii-awful">Why is Ascii awful?</h1>
<p>As usual, stackoverflow has a great concise answer <a href="http://stackoverflow.com/a/19212812">here</a> while quora gets a bit <a href="https://www.quora.com/Why-does-one-learn-ASCII-if-the-computer-compiler-converts-all-the-code-into-machine-code">deeper</a>. But, I’ll try to tl;dr it.</p>

<p>The <code class="highlighter-rouge">char</code> type is a 8-bits and ASCII defines half of the values (0-127). Because the rest (128-255) were undefined, very clever engineers decided to hijack those values. So many of these engineers were clever that there was an explosion of <em>extended ASCII encodings</em> (see <a href="https://en.wikipedia.org/wiki/Windows_code_page">Windows Code Pages</a>).</p>

<p>So, what we have is a world with .txt files where it’s unclear what the contents are unless you have a separate piece of data: which extended encoding it is.</p>

<p>The main reasons why Ascii is awful:</p>

<ul>
  <li>It was just good enough to be useful for a lot of people (e.g. English speakers).</li>
  <li>It didn’t account for a whole lot of other people <em>and</em> left room for them to hack together a solution.</li>
</ul>

<h1 id="why-are-there-so-many-encodings">Why are there so many encodings?</h1>
<p>The crux is that encoding all languages ever is a really hard problem and people needed to write a lot of very sad code to figure it out.</p>

<p>Of particular note is this ongoing question: if we need more than 8-bits, do we go fixed width (always 16 or 32 bits) or variable width (8-bits, 16-bits or 32-bits) depending on the character?</p>

<p>Fixed width -&gt; slightly simpler code.<br />
Variable width -&gt; more efficent in storage/memory/bandwidth.</p>

<p>Here’s evolution afaik:</p>

<ul>
  <li>Ascii -&gt; extended Ascii and false extended Ascii (e.g. not <em>quite</em> backwards compatible).</li>
  <li>
    <p>The Unicode character set is born with the intention of being able to represent every character. That is, for every character that exists, it assigns it a number to represent it (a “code point”).</p>

    <p>It’s size eventually grows to exceed it’s original 16-bit capacity.</p>

    <p>Note that Unicode is <em>not an encoding</em>. It assigns code points BUT doesn’t suggest how the bits are arranged.</p>
  </li>
  <li>
    <p>There are two major encodings for Unicode: UTF-16 (variable with 16- and 32-bit characters) and UTF-32 (constant with 32-bit characters).</p>

    <p>Different machines also order bytes differently, so we have little endian and big endian editions of each: UTF-16BE, UTF-16LE, UTF-32BE and UTF-32LE.</p>
  </li>
  <li>But, we also wanted full backwards compatibility with Ascii: this gave birth to UTF-8.</li>
</ul>

<h1 id="whats-the-right-encoding">What’s the right encoding?</h1>
<p>As the last section suggests, Unicode is the universal standard character set and it’s winning encoding is UTF-8.</p>

<p>Why?</p>

<ul>
  <li>
    <p>UTF-8 is <em>more variable</em> than other encodings - using 8, 16, 24, or 32-bit characters.</p>
  </li>
  <li>UTF-8 fully supports Ascii. UTF-8 uses the same 8-bit encodings for each original Ascii character. So, a valid Ascii file is a valid UTF-8 file.</li>
  <li>
    <p>UTF-8 is <em>sort of</em> supported by Ascii. As implied by the previous point, a UTF-8 file that only uses the 128 Ascii characters can be treated as Ascii.</p>

    <p>But when UTF-8 needs to use 16, 24, or 32-bits, it becomes <em>obviously invalid</em> Ascii.</p>
  </li>
</ul>

<p>For details on each point, see <a href="https://en.wikipedia.org/wiki/UTF-8#Description">Wikipedia’s description of the actual bit layout</a>.</p>

<p>A last note, there’s UTF-8 and UTF-8 BOM. BOM stands for Byte Order Marker. It doesn’t have a function other than denoting that the file is UTF-8. Why? Because UTF-8 doesn’t have endian-based variations.</p>

<h1 id="what-are-characters-graphemes-glyphs">What are characters, graphemes, glyphs?</h1>
<p>I’ve rather abusively used the word “character” to get my point across. As such a natural concept, it’s meaning has been repeatedly hijacked.</p>

<p>Is it the unit of thing that gets deleted when you press delete? Or is it smallest unit of writing? Or it the storage size of 8-bits? What about the exact sequence of bits that represent a unit in a character encoding?</p>

<p>2deep4me, so I’ll direct you <a href="http://utf8everywhere.org/#characters">here</a> for a real definition. Just be aware that, at the end of the day, the existence of all these concepts is somewhat relevant for working with Unicode.</p>

<h1 id="how-do-we-get-by-in-such-a-cold-an-heartless-universe">How do we get by in such a cold an heartless universe?</h1>
<p>First off, acknowledge how first-world encoding problems are. Then, get good.</p>

<p>You can write quite a lot of code without worrying about encodings at all. But when you enter that world:</p>

<ul>
  <li>Be consistent about the encodings used in your code and be wary of behaviors at the boundaries of your code.</li>
  <li>
    <p>Be aware of how your language and operating system might butcher encodings interally.</p>

    <p>16-bit encodings are very common in popular OSes and languages because it was the best option when they were developed (Java, Python, Windows, etc.)</p>
  </li>
  <li>
    <p>Remember that how something appears and what it’s represented as can be very different (e.g. always check the hex).</p>

    <p>From utf8everywhere:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>Some abstract characters can be encoded by different
code points; U+03A9 greek capital letter omega and
U+2126 ohm sign both correspond to the same abstract
character ‘Ω’, and must be treated identically.

Some abstract characters cannot be encoded by a single
code point. These are represented by sequences of
coded characters. For example, the only way to
represent the abstract character ю́ cyrillic small
letter yu with acute is by the sequence U+044E
cyrillic small letter yu followed by U+0301 combining
acute accent.

Moreover, for some abstract characters, there exist
representations using multiple code points, in addition
to the single coded character form. The abstract
character ǵ can be coded by the single code point
U+01F5 latin small letter g with acute, or by the
sequence &lt;U+0067 latin small letter g, U+0301 combining
acute accent&gt;.
</code></pre>
    </div>

    <p>So, there are many possible representations for something that is visually the same. You should be aware of this because an end user wants to be able to search for “ohm sign” using “greek capital letter omega”.</p>

    <p>I would hope for your sake that the language you use has support for <a href="http://unicode.org/faq/normalization.html">Unicode Normalization</a>.</p>
  </li>
</ul>

	</div>
</div>
				</div>
			</div>
		</div>
	</body>
<html>