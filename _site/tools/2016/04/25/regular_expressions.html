<html>
	<head>
		<meta http-equiv='Content-Type' content='text/html; charset=UTF-8'>
 	<title>  regexes |  aimless bitshift</title>
 		<link rel='stylesheet' type='text/css' href='/assets/wvs.css'>
 		<link rel='stylesheet' type='text/css' href='/assets/normalize.css' />
	</head>
	<body>
		<div class='container'>
			<div class='headerbar'>
				<a href="/" style="text-decoration:none">
					<span style="color:#366B8F">
						aimless 
						<span style="color:white">bit</span>shift 
					</span>
				</a>
				<span class='headerbarMenu'>
					notes/realizations re:code
				</span>
			</div>
			<div class='subcontainer'>
				<div class='headerbarSpacer'></div>
				<div class='header depthOneContent'>
					<div class="menuCategory">
						<div class="menuCategoryTitle">
							<a>Recent:</a>
						</div>
					
			  			<div class="menuCategoryPost">
					    	<a href="/tools/2016/08/24/xcode.html">* tools: xcode</a>
						</div>
					
			  			<div class="menuCategoryPost">
					    	<a href="/objective-c/2016/06/28/simple_arc.html">* metaphor #2 simple automatic reference counting</a>
						</div>
					
			  			<div class="menuCategoryPost">
					    	<a href="/metaphors/2016/06/14/simple_computers.html">* metaphor #1 simple computers</a>
						</div>
					
			  			<div class="menuCategoryPost">
					    	<a href="/tools/2016/04/25/regular_expressions.html">* tools: regexes</a>
						</div>
					
			  			<div class="menuCategoryPost">
					    	<a href="/unix/2016/04/12/p1_unix_in_short.html">* unix part 1: in short</a>
						</div>
					
					</div>
				</div>
				<div class='sidebar depthOneContent'>
<!-- 					display recent posts by categories                           -->
					<div class="menuCategory">
						<div class="menuCategoryTitle">
							<a>Recent:</a>
						</div>
					
			  			<div class="menuCategoryPost">
					    	<a href="/tools/2016/08/24/xcode.html">* tools: xcode</a>
						</div>
					
			  			<div class="menuCategoryPost">
					    	<a href="/objective-c/2016/06/28/simple_arc.html">* metaphor #2 simple automatic reference counting</a>
						</div>
					
			  			<div class="menuCategoryPost">
					    	<a href="/metaphors/2016/06/14/simple_computers.html">* metaphor #1 simple computers</a>
						</div>
					
			  			<div class="menuCategoryPost">
					    	<a href="/tools/2016/04/25/regular_expressions.html">* tools: regexes</a>
						</div>
					
			  			<div class="menuCategoryPost">
					    	<a href="/unix/2016/04/12/p1_unix_in_short.html">* unix part 1: in short</a>
						</div>
					
					</div>
					<br>
<!-- 					display all posts by categories                           -->
	
					<div class="menuCategory">
						<div class="menuCategoryTitle">
							<a name="Tools">Tools</a>
						</div>

						
						  	
						  								  		
						  	
						
						  	
						  		
						  			<div class="menuCategoryPost">
							    	<a href="/tools/2016/08/24/xcode.html">* xcoding</a>
									</div>
						  								  		
						  	
						  		
						  			<div class="menuCategoryPost">
							    	<a href="/tools/2016/04/25/regular_expressions.html">* regexes</a>
									</div>
						  								  		
						  	
						  		
						  			<div class="menuCategoryPost">
							    	<a href="/tools/2015/05/23/source-control-gitting-started.html">* git / source control</a>
									</div>
						  								  		
						  	
						
    				</div>
	
					<div class="menuCategory">
						<div class="menuCategoryTitle">
							<a name="Objective-C">Objective-C</a>
						</div>

						
						  	
						  								  		
						  	
						
						  	
						  		
						  			<div class="menuCategoryPost">
							    	<a href="/objective-c/2016/06/28/simple_arc.html">* simple automatic reference counting</a>
									</div>
						  								  		
						  	
						  		
						  			<div class="menuCategoryPost">
							    	<a href="/objective-c/2016/04/04/objective_c_patterns.html">* interaction patterns</a>
									</div>
						  								  		
						  	
						
    				</div>
	
					<div class="menuCategory">
						<div class="menuCategoryTitle">
							<a name="Unix">Unix</a>
						</div>

						
						  	
						  								  		
						  	
						
						  	
						  		
						  			<div class="menuCategoryPost">
							    	<a href="/unix/2016/04/12/p1_unix_in_short.html">* part 1: getting around</a>
									</div>
						  								  		
						  	
						
    				</div>
	
					<div class="menuCategory">
						<div class="menuCategoryTitle">
							<a name="Metaphors">Metaphors</a>
						</div>

						
						  	
						  								  		
						  	
						
						  	
						  		
						  			<div class="menuCategoryPost">
							    	<a href="/metaphors/2016/06/14/simple_computers.html">* simple computers</a>
									</div>
						  								  		
						  	
						
    				</div>
	
				</div>
				<div class='content'>
				  <div class='post depthOneContent'>
	<div class='postHeader'>
	<h1>
		tools: regexes
	</h1>
	</div>
	<div class='postBody'>
	25 Apr 2016 | Tools
	<p>There’s a saying:<br />
“Trying to solve a problem with regexes? Now, you have two problems.”</p>

<p>Complex expressions that are nearly impossible to validate.</p>

<p><em>Regular Expressions</em> are a great tool for searching and manipulating text.<br />
The standard from unix tools like <code class="highlighter-rouge">grep</code>, <code class="highlighter-rouge">find</code>, and <code class="highlighter-rouge">sed</code> to Excel.</p>

<p>So, let’s get finding.</p>

<!--more-->

<h2 id="what-is-a-regex">What Is A Regex</h2>
<p>Regular expressions are a pretty natural concept.</p>

<p>Suppose you’re the king of nerds, and you wanted to find the word ‘color’ in a story. You’d write a thing to handle that.</p>

<p>Now, suppose you were slipping in and out of British English and had to search for ‘color’ or ‘colour’.</p>

<p>How would you generalize that to make that type of search easier in the future?</p>

<p>You’d probably allow for specifying 0 or 1 <code class="highlighter-rouge">u</code>’s like this:<br />
<code class="highlighter-rouge">"colou?r"</code></p>

<h2 id="metacharacters">Metacharacters</h2>
<p>With regexes, we give special meaning to certain characters. In the above example, the <code class="highlighter-rouge">?</code> character didn’t search for a question mark, but made the ‘u’ optional.</p>

<p>Note that metacharacters aren’t completely standardized between regex implementations.</p>

<h2 id="grep--egrep">GREP &amp; EGREP</h2>
<p>grep is the <em>commonest</em> use case for regexes, so take note:<br />
<strong>without the <code class="highlighter-rouge">-E</code> flag, some metacharacters need to be prefixed with <code class="highlighter-rouge">\</code>.</strong></p>

<p>e.g. <code class="highlighter-rouge">"colou?r" becomes "colou\?r"</code> and would be used as<br />
  <code class="highlighter-rouge">grep "colou\?r" FILENAME</code></p>

<p>By default, grep uses <strong>BRE</strong> (Basic Regular Expressions).<br />
The <strong>-E</strong> flag switches to <strong>ERE</strong> (Extended Regular Expressions).</p>

<p>In <strong>ERE</strong>, <code class="highlighter-rouge">\</code> will match a literal \ character.<br />
e.g. <code class="highlighter-rouge">"colou\?r"</code> would match ‘colou\r’ (i.e. it would be wrong).</p>

<p>Using <code class="highlighter-rouge">egrep</code> is equivalent to including the <strong>-E</strong>, so the following are equivalent:<br />
  <code class="highlighter-rouge">grep "colou\?r" FILENAME</code><br />
  <code class="highlighter-rouge">grep -E "colou?r" FILENAME</code><br />
  <code class="highlighter-rouge">egrep "colou?r" FILENAME</code></p>

<p>Topics that only apply to <code class="highlighter-rouge">egrep</code> will have a *.</p>

<h2 id="positional-metacharacters">Positional Metacharacters</h2>
<p><code class="highlighter-rouge">^</code> = beginning of the line/string<br />
<code class="highlighter-rouge">$</code> = end of the line/string<br />
<code class="highlighter-rouge">\b</code> = start or end of a word<br />
<code class="highlighter-rouge">\B</code> = middle of a word<br />
<code class="highlighter-rouge">\&lt;</code> = start of a word<br />
<code class="highlighter-rouge">\&gt;</code> = end of a word</p>

<p>Example: Matching against “<code class="highlighter-rouge">I'm the real shady.</code>”  
<img src="/assets/posts/regex/regex_positional.png" alt="Example" /></p>

<h2 id="amount-metacharacters">Amount Metacharacters</h2>
<p>Amount specifiers match modify the preceding character <em>or parenthesized unit</em>.</p>

<p><code class="highlighter-rouge">?</code> = 0 or 1 times (egrep only)<br />
<code class="highlighter-rouge">+</code> = 1 or more times 
<code class="highlighter-rouge">*</code> = any number of times (including 0)<br />
<code class="highlighter-rouge"><span class="p">{</span><span class="err">AMOUNT</span><span class="p">}</span></code> = exactly AMOUNT times<br />
<code class="highlighter-rouge"><span class="p">{</span><span class="err">MIN,</span><span class="w"> </span><span class="err">MAX</span><span class="p">}</span></code> = any time of times from MIN to MAX (inclusive)<br />
<code class="highlighter-rouge"><span class="p">{</span><span class="err">MIN,</span><span class="w"> </span><span class="p">}</span></code> = at least MIN times</p>

<p>Example:<br />
<img src="/assets/posts/regex/regex_amount.png" alt="Example" /></p>

<p>Subtle notes…<br />
1. The <code class="highlighter-rouge">"p*"</code> example matches everything because there’s <em>at least 0 p’s in everything</em>.<br />
2. The <code class="highlighter-rouge">e{1}</code> example matches both e’s in the second line <em>independently</em>.</p>

<h2 id="character-classes">Character Classes</h2>
<p>Now, what if we have a “or” situation. Say, you know you often mispell <code class="highlighter-rouge">catagory</code> as <code class="highlighter-rouge">category</code>.<br />
We would use this <code class="highlighter-rouge">"cat[ae]gory"</code>.</p>

<p>Example:<br />
<img src="/assets/posts/regex/regex_characterClass1.png" alt="Example" /></p>

<p>A <em>character class</em> lets us a single character match against many.</p>

<h2 id="ranges">Ranges</h2>
<p>Character classes allow us to use a <strong><code class="highlighter-rouge">-</code></strong> to denote a range.<br />
<code class="highlighter-rouge">[a-c]</code> = <code class="highlighter-rouge">[abc]</code><br />
<code class="highlighter-rouge">[A-D]</code> = <code class="highlighter-rouge">[ABCD]</code><br />
<code class="highlighter-rouge">[0-4]</code> = <code class="highlighter-rouge">[01234]</code></p>

<p>Character classes can mix ranges and individual characters:<br />
<code class="highlighter-rouge">[0-4A-D!]</code> = <code class="highlighter-rouge">[01234ABCD!]</code></p>

<p>Some implementations support…<br />
1. exclusion (e.g. <code class="highlighter-rouge">[A-Z-[AEIOU]]</code> non-vowel captial letters)
2. character class intersection</p>

<h2 id="negation">Negation</h2>
<p>They also allow us to negate with <strong><code class="highlighter-rouge">^</code></strong>.<br />
<code class="highlighter-rouge">[^abc]</code> = match all characters that are not a, b, c.</p>

<p>This only applies if it’s the first character after the bracket!</p>

<h2 id="shorthand">Shorthand</h2>
<p>Common character classes have special shorthand:<br />
<code class="highlighter-rouge">.</code> = Any character<br />
<code class="highlighter-rouge">\d</code> = <code class="highlighter-rouge">[0-9]</code> # digits<br />
<code class="highlighter-rouge">\w</code> = <code class="highlighter-rouge">[a-zA-Z0-9_]</code> # alphanumeric &amp; underscore<br />
<code class="highlighter-rouge">\s</code> = <code class="highlighter-rouge">[ \r\t\n\f]</code> # whitespace<br />
<code class="highlighter-rouge">\n</code> = <code class="highlighter-rouge">[\n]</code> # newline</p>

<p>And their negations<br />
<code class="highlighter-rouge">\D</code> = <code class="highlighter-rouge">[^0-9]</code> # not digits<br />
<code class="highlighter-rouge">\W</code> = <code class="highlighter-rouge">[^a-zA-Z0-9_]</code> # not whitespace or underscore<br />
<code class="highlighter-rouge">\S</code> = <code class="highlighter-rouge">[^ \r\t\n\f]</code> # not whitespace</p>

<h2 id="alternation">Alternation*</h2>
<p>A fancy word for ‘or’, alternation allows you to match between two <em>alternatives</em> with a |.</p>

<p>Ex. The following match against weekdays:<br />
(Monday|Tuesday|Wednesday|Thursday|Friday)<br />
(Mon|Tues|Wednes|Thurs|Fri)day</p>

<h2 id="escaping">Escaping</h2>
<p>Characters that need to be escaped to be used not as metacharacters are:<br />
<code class="highlighter-rouge">\</code>, <code class="highlighter-rouge">^</code>, <code class="highlighter-rouge">$</code>, <code class="highlighter-rouge">.</code>, <code class="highlighter-rouge">*</code>, <code class="highlighter-rouge">[</code>, <code class="highlighter-rouge">]</code></p>

<p>Ex.<br />
The pattern <code class="highlighter-rouge">folder\\file</code> would match <code class="highlighter-rouge">folder\file</code><br />
The pattern <code class="highlighter-rouge">taytay\.mp3</code> would match <code class="highlighter-rouge">taytay.mp3</code></p>

<h2 id="capturing-groups">‘Capturing’ Groups*</h2>
<p>Suppose you had a list of filenames and wanted to separate out the name from the extension.</p>

<p>You could write a hand-parser or just do something like:<br />
<code class="highlighter-rouge">(.*)\.(.{1,})</code></p>

<p>And dump them like:<br />
<code class="highlighter-rouge">file: \1, ext: \2</code></p>

<p><em>Capturing groups</em> allow saving off parts of a regular expression.</p>

<p>Group <code class="highlighter-rouge">\0</code> usually refers to the entire expression, while <code class="highlighter-rouge">\1</code> through <code class="highlighter-rouge">\9</code> are for any parenthesized parts.</p>

<p>If you’re using a parenthesis for <em>alternation</em>, you can opt out of that being a capturing group by turning the <code class="highlighter-rouge">(</code> into <code class="highlighter-rouge">(?:</code> <a href="http://stackoverflow.com/questions/3512471/what-is-a-non-capturing-group">reference</a>.</p>

<p>You can nest capturing groups. The indexes are always based on left to right ordering.</p>

<h2 id="greping-harder">Greping Harder</h2>
<p>Basic grepping…
<code class="highlighter-rouge">grep PATTERN FILE</code>
* show matches to the regex PATTERN in FILE</p>

<p>Specifying context
<code class="highlighter-rouge">grep -C 3 PATTERN FILE</code>
* show 3 lines before and after each match</p>

<p><code class="highlighter-rouge">grep -B 3 PATTERN FILE</code>
* show 3 lines before each match</p>

<p><code class="highlighter-rouge">grep -A 3 PATTERN FILE</code>
* show 3 lines after each match</p>

<h2 id="further-reference">Further Reference</h2>
<p>For the most concise cheatsheet ever, <a href="http://stackoverflow.com/questions/22542834/how-to-use-regular-expressions-regex-in-microsoft-excel-both-in-cell-and-loops">a Stack Overflow answer on Regex in Excel</a></p>

<p>For more on _any of these topics, <a href="http://stackoverflow.com/questions/22937618/reference-what-does-this-regex-mean/22944075#22944075">The Stack Overflow Regex FAQ</a>.</p>

<p>For interactive exercises, <a href="http://regexone.com/">RegexOne</a>. Try not to cheese them with <code class="highlighter-rouge">.*</code>.</p>

<p>For an explanation of greedy vs lazy that I couldn’t simplify, <a href="https://msdn.microsoft.com/en-us/library/3206d374(v=vs.110).aspx">MSDN Regex Quantifiers</a></p>

<p>Unicode is also too hard to cover, but <a href="http://www.regular-expressions.info/unicode.html">character classes for code point ranges are a thing</a></p>

	</div>
</div>
				</div>
			</div>
		</div>
	</body>
<html>